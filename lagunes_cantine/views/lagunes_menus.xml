<?xml version="1.0" encoding="utf-8"?>
<odoo>
    
    <!-- Menu principal -->
    <menuitem id="menu_lagunes_cantine_root" 
              name="Restaurant Lagunes" 
              sequence="10" 
              web_icon="lagunes_cantine,static/description/icon.png"/>
    
    <!-- Sous-menu Gestion -->
    <menuitem id="menu_lagunes_gestion" 
              name="Gestion" 
              parent="menu_lagunes_cantine_root" 
              sequence="10"/>
    
    <!-- Menu Entreprises -->
    <menuitem id="menu_lagunes_entreprises" 
              name="Entreprises Clientes" 
              parent="menu_lagunes_gestion" 
              action="action_partner_cantine" 
              sequence="10"/>
    
    <!-- Menu Employés - DÉSACTIVÉ : Les employés sont maintenant gérés depuis les entreprises clientes -->
    <!-- <menuitem id="menu_lagunes_employee" 
              name="Employés" 
              parent="menu_lagunes_gestion" 
              action="action_lagunes_employee" 
              sequence="20"/> -->
    
    <!-- Sous-menu Menus & Plats -->
    <menuitem id="menu_lagunes_menus_plats" 
              name="Menus - Plats" 
              parent="menu_lagunes_cantine_root" 
              sequence="20"/>
    
    <!-- Menu Packs de menus -->
    <menuitem id="menu_lagunes_menu_pack" 
              name="Packs de Menus" 
              parent="menu_lagunes_menus_plats" 
              action="action_lagunes_menu_pack" 
              sequence="10"/>
    
    <!-- Menu Menus -->
    <menuitem id="menu_lagunes_menu" 
              name="Menus Cantine" 
              parent="menu_lagunes_menus_plats" 
              action="action_lagunes_menu" 
              sequence="20"/>
    
    <!-- Menu Plats -->
    <menuitem id="menu_lagunes_plat" 
              name="Plats" 
              parent="menu_lagunes_menus_plats" 
              action="action_lagunes_plat" 
              sequence="30"/>
    
    <!-- Menu Options de plats -->
    <menuitem id="menu_lagunes_plat_option" 
              name="Options de Plats" 
              parent="menu_lagunes_menus_plats" 
              action="action_lagunes_plat_option" 
              sequence="40"/>
    
    <!-- Sous-menu Commandes & Facturation -->
    <menuitem id="menu_lagunes_commandes" 
              name="Commandes &amp; Facturation" 
              parent="menu_lagunes_cantine_root" 
              sequence="30"/>
    
    <!-- Menu Commandes (toutes) -->
    <menuitem id="menu_lagunes_commande" 
              name="Toutes les commandes" 
              parent="menu_lagunes_commandes" 
              action="action_lagunes_commande" 
              sequence="10"/>
    
    <!-- Menu Historique - NOUVEAU -->
    <menuitem id="menu_lagunes_commande_history" 
              name="Historique" 
              parent="menu_lagunes_commandes" 
              action="action_lagunes_commande_history" 
              sequence="20"
              groups="lagunes_cantine.group_lagunes_manager"/>
    
    <!-- Sous-menu Cuisine (pour les cuisiniers) -->
    <menuitem id="menu_lagunes_cuisine" 
              name="Cuisine" 
              parent="menu_lagunes_cantine_root" 
              sequence="40" 
              groups="lagunes_cantine.group_lagunes_cuisine"/>
    
    <menuitem id="menu_lagunes_commande_cuisine" 
              name="Commandes du jour" 
              parent="menu_lagunes_cuisine" 
              action="action_lagunes_commande_cuisine" 
              sequence="10"/>
    
    <!-- Sous-menu Statistiques - NOUVEAU -->
    <menuitem id="menu_lagunes_stats" 
              name="Statistiques" 
              parent="menu_lagunes_cantine_root" 
              sequence="50"
              groups="lagunes_cantine.group_lagunes_manager"/>
    
    <!-- Statistiques Commandes - NOUVEAU -->
    <record id="action_lagunes_stats_commandes" model="ir.actions.act_window">
        <field name="name">Statistiques Commandes</field>
        <field name="res_model">lagunes.commande</field>
        <field name="view_mode">pivot,graph,list</field>
        <field name="context">{'search_default_this_month': 1, 'search_default_group_week': 1}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Aucune donnée statistique
            </p>
            <p>
                Analysez les tendances de commandes par période, entreprise et plat.
            </p>
        </field>
    </record>
    
    <menuitem id="menu_lagunes_stats_commandes" 
              name="Commandes" 
              parent="menu_lagunes_stats" 
              action="action_lagunes_stats_commandes" 
              sequence="10"/>
    
    <!-- Statistiques Menus - NOUVEAU -->
    <record id="action_lagunes_stats_menus" model="ir.actions.act_window">
        <field name="name">Statistiques Menus</field>
        <field name="res_model">lagunes.menu</field>
        <field name="view_mode">pivot,graph,list</field>
        <field name="context">{'search_default_this_month': 1, 'search_default_group_entreprise': 1}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Aucune donnée statistique
            </p>
            <p>
                Analysez la popularité des menus et les tendances.
            </p>
        </field>
    </record>
    
    <menuitem id="menu_lagunes_stats_menus" 
              name="Menus" 
              parent="menu_lagunes_stats" 
              action="action_lagunes_stats_menus" 
              sequence="20"/>

</odoo>